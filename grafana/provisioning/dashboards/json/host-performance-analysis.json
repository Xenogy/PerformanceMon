{
  "annotations": { "list": [] },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
      "id": 100,
      "title": "Resource Pressure (PSI) - Contention Indicators",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Percentage of time at least one task is stalled waiting for CPU. Values above 10% indicate significant CPU contention.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.1 },
              { "color": "red", "value": 0.3 }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 1 },
      "id": 1,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:cpu_pressure:some_ratio",
          "legendFormat": "CPU Pressure (some)",
          "refId": "A"
        }
      ],
      "title": "CPU Pressure",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Memory pressure indicates tasks are stalled due to memory constraints. 'Some' means at least one task, 'Full' means all tasks are stalled.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.1 },
              { "color": "red", "value": 0.3 }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 1 },
      "id": 2,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:memory_pressure:some_ratio",
          "legendFormat": "Memory Pressure (some)",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:memory_pressure:full_ratio",
          "legendFormat": "Memory Pressure (full)",
          "refId": "B"
        }
      ],
      "title": "Memory Pressure",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "I/O pressure indicates tasks are stalled waiting for disk/storage. High values suggest storage bottlenecks.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.1 },
              { "color": "red", "value": 0.3 }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 1 },
      "id": 3,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:io_pressure:some_ratio",
          "legendFormat": "I/O Pressure (some)",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:io_pressure:full_ratio",
          "legendFormat": "I/O Pressure (full)",
          "refId": "B"
        }
      ],
      "title": "I/O Pressure",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 },
      "id": 101,
      "title": "CPU Scheduling & Context Switching",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Ratio of time tasks spend waiting in runqueue vs running. Higher values indicate CPU saturation.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 0.2 },
              { "color": "red", "value": 0.5 }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 10 },
      "id": 10,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:scheduler_wait:ratio",
          "legendFormat": "Scheduler Wait Ratio",
          "refId": "A"
        }
      ],
      "title": "Scheduler Wait Ratio",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Rate of context switches. Very high rates can indicate overhead from too many processes/threads.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 10 },
      "id": 11,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:context_switches:rate5m",
          "legendFormat": "Context Switches/s",
          "refId": "A"
        }
      ],
      "title": "Context Switches Rate",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "TLB shootdowns occur when page table changes need to be propagated across CPUs. High rates indicate memory mapping overhead.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 10 },
      "id": 12,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:tlb_shootdowns:rate5m",
          "legendFormat": "TLB Shootdowns/s",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:interrupts:rate5m",
          "legendFormat": "Total Interrupts/s",
          "refId": "B"
        }
      ],
      "title": "TLB Shootdowns & Interrupts",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 18 },
      "id": 102,
      "title": "Memory Subsystem",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Major page faults require disk access and indicate memory pressure. Minor faults are normal.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": { "id": "byName", "options": "Major Page Faults/s" },
            "properties": [{ "id": "color", "value": { "fixedColor": "red", "mode": "fixed" } }]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 19 },
      "id": 20,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:page_faults:rate5m",
          "legendFormat": "Page Faults/s (minor)",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:major_page_faults:rate5m",
          "legendFormat": "Major Page Faults/s",
          "refId": "B"
        }
      ],
      "title": "Page Faults",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Dirty pages are data waiting to be written to disk. High values may cause write stalls.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 19 },
      "id": 21,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:memory_dirty:bytes",
          "legendFormat": "Dirty Pages",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:memory_writeback:bytes",
          "legendFormat": "Writeback",
          "refId": "B"
        }
      ],
      "title": "Dirty Pages & Writeback",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Kernel slab memory usage. Unreclaimable slab memory can cause memory pressure.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 19 },
      "id": 22,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:slab_reclaimable:bytes",
          "legendFormat": "Slab Reclaimable",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:slab_unreclaimable:bytes",
          "legendFormat": "Slab Unreclaimable",
          "refId": "B"
        }
      ],
      "title": "Kernel Slab Memory",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 27 },
      "id": 103,
      "title": "NUMA Memory Distribution",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Memory distribution across NUMA nodes. Imbalance can cause performance issues.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "bytes"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 28 },
      "id": 30,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_memory_numa_MemUsed",
          "legendFormat": "NUMA Node {{ exported_node }} Used",
          "refId": "A"
        }
      ],
      "title": "NUMA Memory Usage by Node",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Local vs remote NUMA memory access. High remote access indicates poor NUMA locality.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": { "id": "byRegexp", "options": ".*Remote.*" },
            "properties": [{ "id": "color", "value": { "fixedColor": "orange", "mode": "fixed" } }]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 28 },
      "id": 31,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "rate(node_memory_numa_local_node_total[5m])",
          "legendFormat": "NUMA {{ exported_node }} Local Access/s",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "rate(node_memory_numa_other_node_total[5m])",
          "legendFormat": "NUMA {{ exported_node }} Remote Access/s",
          "refId": "B"
        }
      ],
      "title": "NUMA Local vs Remote Access",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 36 },
      "id": 104,
      "title": "Network Stack & Process Stats",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Network packet drops and squeezes indicate network stack overload.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": { "id": "byRegexp", "options": ".*Dropped.*" },
            "properties": [{ "id": "color", "value": { "fixedColor": "red", "mode": "fixed" } }]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 37 },
      "id": 40,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "sum(rate(node_softnet_dropped_total[5m]))",
          "legendFormat": "Softnet Dropped/s",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "sum(rate(node_softnet_times_squeezed_total[5m]))",
          "legendFormat": "Softnet Squeezed/s",
          "refId": "B"
        }
      ],
      "title": "Network Stack Health",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "TCP connection states. High TIME_WAIT may indicate connection churn.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 37 },
      "id": 41,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_tcp_connection_states{state=\"established\"}",
          "legendFormat": "Established",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_tcp_connection_states{state=\"time_wait\"}",
          "legendFormat": "Time Wait",
          "refId": "B"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_tcp_connection_states{state=\"close_wait\"}",
          "legendFormat": "Close Wait",
          "refId": "C"
        }
      ],
      "title": "TCP Connection States",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Process states and thread counts. Blocked (D-state) processes indicate I/O waits.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": { "id": "byName", "options": "Blocked (D-state)" },
            "properties": [{ "id": "color", "value": { "fixedColor": "red", "mode": "fixed" } }]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 37 },
      "id": 42,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_processes_state{state=\"R\"}",
          "legendFormat": "Running",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_processes_state{state=\"D\"}",
          "legendFormat": "Blocked (D-state)",
          "refId": "B"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_processes_threads",
          "legendFormat": "Total Threads",
          "refId": "C"
        }
      ],
      "title": "Process States & Threads",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 45 },
      "id": 106,
      "title": "Disk I/O Latency & Saturation",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Host disk read and write latency. Values over 50ms indicate storage issues.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 20, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "line" }
          },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.02 }, { "color": "red", "value": 0.05 }] },
          "unit": "s"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 46 },
      "id": 60,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node:disk_read_latency:avg5m",
          "legendFormat": "{{ device }} Read Latency",
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node:disk_write_latency:avg5m",
          "legendFormat": "{{ device }} Write Latency",
          "refId": "B"
        }
      ],
      "title": "Disk Latency by Device",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "description": "Weighted I/O time accounts for queue depth. Values over 80% indicate disk saturation.",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line",
            "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5,
            "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "area" }
          },
          "mappings": [],
          "max": 1,
          "min": 0,
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.5 }, { "color": "red", "value": 0.8 }] },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 46 },
      "id": 61,
      "options": {
        "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "mode": "multi", "sort": "desc" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node:disk_io_weighted:rate5m",
          "legendFormat": "{{ device }} Weighted I/O",
          "refId": "A"
        }
      ],
      "title": "Disk Saturation (Weighted I/O Time)",
      "type": "timeseries"
    },
    {
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 54 },
      "id": 105,
      "title": "Critical Alerts Summary",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "red", "value": 1 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 0, "y": 46 },
      "id": 50,
      "options": {
        "colorMode": "value", "graphMode": "none", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_vmstat_oom_kill",
          "legendFormat": "OOM Kills",
          "refId": "A"
        }
      ],
      "title": "OOM Kills (Total)",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.05 }, { "color": "red", "value": 0.15 }] },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 4, "y": 46 },
      "id": 51,
      "options": {
        "colorMode": "value", "graphMode": "area", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:cpu_pressure:some_ratio",
          "legendFormat": "CPU Pressure",
          "refId": "A"
        }
      ],
      "title": "CPU Pressure",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.05 }, { "color": "red", "value": 0.15 }] },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 8, "y": 46 },
      "id": 52,
      "options": {
        "colorMode": "value", "graphMode": "area", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:memory_pressure:some_ratio",
          "legendFormat": "Memory Pressure",
          "refId": "A"
        }
      ],
      "title": "Memory Pressure",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.05 }, { "color": "red", "value": 0.15 }] },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 12, "y": 46 },
      "id": 53,
      "options": {
        "colorMode": "value", "graphMode": "area", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:io_pressure:some_ratio",
          "legendFormat": "I/O Pressure",
          "refId": "A"
        }
      ],
      "title": "I/O Pressure",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 10 }, { "color": "red", "value": 50 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 16, "y": 46 },
      "id": 54,
      "options": {
        "colorMode": "value", "graphMode": "area", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "node_processes_state{state=\"D\"}",
          "legendFormat": "Blocked Processes",
          "refId": "A"
        }
      ],
      "title": "Blocked Processes",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }, { "color": "red", "value": 1 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 20, "y": 46 },
      "id": 55,
      "options": {
        "colorMode": "value", "graphMode": "area", "justifyMode": "center",
        "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
        "textMode": "auto"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "expr": "host:major_page_faults:rate5m",
          "legendFormat": "Major Faults/s",
          "refId": "A"
        }
      ],
      "title": "Major Page Faults/s",
      "type": "stat"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 39,
  "style": "dark",
  "tags": ["performance", "bottlenecks", "host"],
  "templating": {
    "list": [
      {
        "current": { "selected": false, "text": "Prometheus", "value": "prometheus" },
        "hide": 0,
        "includeAll": false,
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
      }
    ]
  },
  "time": { "from": "now-1h", "to": "now" },
  "timepicker": {},
  "timezone": "browser",
  "title": "Host Performance Analysis",
  "uid": "host-perf-analysis",
  "version": 1
}
